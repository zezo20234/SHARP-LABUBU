<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mini Tournament</title>

<style>
body{
  margin:0;
  font-family: system-ui, sans-serif;
  background:#0f172a;
  color:#fff;
}
.container{
  max-width:500px;
  margin:auto;
  padding:15px;
}
h2{
  text-align:center;
  margin:10px 0;
}
.card{
  background:#1e293b;
  border-radius:12px;
  padding:12px;
  margin-bottom:12px;
}
.match{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin:6px 0;
}
.match input{
  width:45px;
  text-align:center;
  font-size:16px;
  border-radius:6px;
  border:none;
  padding:5px;
}
button{
  width:100%;
  padding:10px;
  border:none;
  border-radius:10px;
  background:#22c55e;
  color:#000;
  font-size:16px;
  font-weight:bold;
  margin-top:8px;
}
table{
  width:100%;
  border-collapse:collapse;
}
th,td{
  padding:6px;
  text-align:center;
}
th{
  background:#334155;
}
.final{
  background:#7c2d12;
}
</style>
</head>

<body>
<div class="container">

<h2>üèÜ Tournament</h2>

<div class="card" id="matches"></div>

<div class="card">
<h2>üìä Leaderboard</h2>
<table id="table">
<tr><th>Team</th><th>Pts</th></tr>
</table>
</div>

<div class="card final" id="finalBox" style="display:none"></div>

</div>

<script>
const teams = ["Falcons","Orange","Lilly"];

let matches = [
  {a:"Falcons", b:"Orange", s1:null, s2:null},
  {a:"Falcons", b:"Lilly",  s1:null, s2:null},
  {a:"Orange",  b:"Lilly",  s1:null, s2:null},
];

function renderMatches(){
  const box = document.getElementById("matches");
  box.innerHTML = "<h2>‚öΩ Matches</h2>";

  matches.forEach((m,i)=>{
    box.innerHTML += `
      <div class="match">
        <span>${m.a}</span>
        <input id="s1_${i}" placeholder="-" value="${m.s1 ?? ''}">
        <span>vs</span>
        <input id="s2_${i}" placeholder="-" value="${m.s2 ?? ''}">
        <span>${m.b}</span>
      </div>
      <button onclick="save(${i})">Save</button>
    `;
  });
}

function save(i){
  const s1 = document.getElementById("s1_"+i).value;
  const s2 = document.getElementById("s2_"+i).value;

  if(s1==='' || s2===''){
    alert("Enter both scores");
    return;
  }
  matches[i].s1 = Number(s1);
  matches[i].s2 = Number(s2);

  updateTable();
}

function updateTable(){
  let pts = {};
  teams.forEach(t=>pts[t]=0);

  matches.forEach(m=>{
    if(m.s1===null || m.s2===null) return;
    if(m.s1 > m.s2) pts[m.a]+=3;
    else if(m.s2 > m.s1) pts[m.b]+=3;
    else{
      pts[m.a]+=1;
      pts[m.b]+=1;
    }
  });

  const sorted = Object.entries(pts).sort((a,b)=>b[1]-a[1]);

  const table = document.getElementById("table");
  table.innerHTML = "<tr><th>Team</th><th>Pts</th></tr>";
  sorted.forEach(t=>{
    table.innerHTML += `<tr><td>${t[0]}</td><td>${t[1]}</td></tr>`;
  });

  checkFinal(sorted);
}

function checkFinal(sorted){
  const done = matches.every(m=>m.s1!==null && m.s2!==null);
  if(!done) return;

  const t1 = sorted[0][0];
  const t2 = sorted[1][0];

  const box = document.getElementById("finalBox");
  box.style.display="block";
  box.innerHTML = `
    <h2>üî• FINAL</h2>
    <div class="match">
      <span>${t1}</span>
      <input id="fs1" placeholder="-">
      <span>vs</span>
      <input id="fs2" placeholder="-">
      <span>${t2}</span>
    </div>
    <button onclick="finishFinal('${t1}','${t2}')">Finish Final</button>
  `;
}

function finishFinal(a,b){
  const s1 = document.getElementById("fs1").value;
  const s2 = document.getElementById("fs2").value;
  if(s1===''||s2===''){
    alert("Enter final scores");
    return;
  }
  alert(
    Number(s1)>Number(s2) ? `${a} WINS üèÜ`
    : Number(s2)>Number(s1) ? `${b} WINS üèÜ`
    : "DRAW ü§ù"
  );
}

renderMatches();
updateTable();
</script>

</body>
</html>